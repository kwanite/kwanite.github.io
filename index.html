<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Murat Usta - AI Experience Designer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-primary: #0f172a; /* Slate 900 - deeper for better hierarchy */
            --text-secondary: #475569; /* Slate 600 */
            --text-tertiary: #64748b; /* Slate 500 */
            --border-color: #e2e8f0; /* Slate 200 */
            --card-bg-color: #f8fafc; /* Slate 50 */
            --link-color: #0c4a6e; /* Cyan 800 */
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
            line-height: 1.6;
        }

        h1 {
            font-weight: 800;
            letter-spacing: -0.025em;
            line-height: 1.1;
        }

        h2 {
            font-weight: 700;
            letter-spacing: -0.015em;
            line-height: 1.2;
        }

        h3 {
            font-weight: 600;
            letter-spacing: -0.005em;
            line-height: 1.3;
        }

        /* Simple Scroll Animation */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            color: var(--text-primary);
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border-color);
        }

        .card-title {
            font-size: 1.125rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: -0.01em;
        }

        .card-description {
            color: var(--text-secondary);
            line-height: 1.65;
            font-size: 0.9375rem;
        }

        .tag-chip {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            background-color: #f1f5f9;
            color: var(--text-primary);
            font-size: 0.75rem;
            font-weight: 500;
            border-radius: 0.750rem;
            border: 1.5px solid #435469;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .design-tool-chip {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            font-size: 0.8125rem;
            font-weight: 600;
            border-radius: 1rem;
            border: 2px solid #1e40af;
            margin-right: 0.75rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
            transition: all 0.2s ease;
        }

        .design-tool-chip:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            position: relative;
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 95%;
            max-width: 1200px;
            height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .modal-image {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
        }

        /* Handle long images in modal */
        .modal-image-container {
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 8px;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #ffffff;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.2s ease;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.1);
        }

            /* Navigation arrows */
            .modal-nav {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(0, 0, 0, 0.7);
                color: white;
                border: 2px solid rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 20px;
                font-weight: bold;
                z-index: 1001;
                transition: all 0.2s ease;
                user-select: none;
            }

            .modal-nav:hover {
                background: rgba(0, 0, 0, 0.9);
                border-color: rgba(255, 255, 255, 0.6);
                transform: translateY(-50%) scale(1.1);
            }

            .modal-prev {
                left: 30px;
            }

            .modal-next {
                right: 30px;
            }

            .modal-nav.disabled {
                opacity: 0.3;
                cursor: not-allowed;
                pointer-events: none;
            }

        /* Clickable image cursor */
        .clickable-image {
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .clickable-image:hover {
            opacity: 0.9;
        }

        @media (min-width: 768px) {
            .section-title {
                font-size: 2rem;
                margin-bottom: 2rem;
                padding-bottom: 1rem;
            }
            
            .card-title {
                font-size: 1.25rem;
                font-weight: 700;
                letter-spacing: -0.01em;
            }

            .card-description {
                font-size: 1rem;
            }

            .modal-content {
                padding: 40px;
            }
        }

        /* Prevent body scroll when modal is open */
        body.modal-open {
            overflow: hidden;
        }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-3xl mx-auto px-6 py-20 md:py-32">
        <header class="mb-16 md:mb-20 animate-on-scroll">
            <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-6 md:gap-8">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold tracking-tight text-text-primary mb-2">
                        Murat Usta
                    </h1>
                    <p class="text-lg md:text-xl text-text-tertiary font-light">
                        AI Experience Designer
                    </p>
                </div>
                <div class="text-sm md:text-base text-text-secondary space-y-1 md:text-right">
                    <div>
                        <a href="mailto:murat.usta@email.com" class="contact-link">murat.usta@email.com</a>
                    </div>
                    <div>
                        <a href="tel:+1234567890" class="contact-link">+1 (234) 567-8900</a>
                    </div>
                </div>
            </div>
            <!----------------------
            <div class="border-b-2 border-[var(--text-primary)] mt-12 md:mt-16 opacity-20"></div>
            ---->
        </header>

        <main class="space-y-20 md:space-y-24">

            <section class="animate-on-scroll">
                <h2 class="section-title">
                    Enterprise AI Platform
                </h2>
                <div class="space-y-5">
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">AI UX Design Assistant</h3>
                        <p class="card-description">Designed an assistant that turns text-based briefs and low-fi wireframe images into single-file HTML/CSS prototypes, accelerating development and standardizing UX quality.</p>
                        <div class="flex flex-wrap mt-4">
                            <span class="tag-chip">Rapid Prototyping</span>
                            <span class="tag-chip">AI-Assisted Design</span>
                            <span class="tag-chip">Productivity</span>
                        </div>
                    </div>
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">AI UX Research Analyzer</h3>
                        <p class="card-description">Built a tool that analyzes UX meeting transcripts to extract user flows, pain points, and design rationales, accelerating evidence-based decisions.</p>
                        <div class="flex flex-wrap mt-4">
                            <span class="tag-chip">User Research</span>
                            <span class="tag-chip">AI-Assisted Analysis</span>
                            <span class="tag-chip">Efficiency</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="animate-on-scroll">
                <h2 class="section-title">
                    AI Assistant Conversational Design
                </h2>
                <div class="space-y-5">
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl overflow-hidden">
                        <img 
                            src="assets/aiassistant.png" 
                            alt="AI Assistant interface" 
                            class="w-full h-auto object-cover clickable-image"
                            onclick="openModal(this)"
                        >
                        <div class="p-7">
                            <h3 class="card-title">Reusable Conversational Patterns</h3>
                            <p class="text-text-secondary leading-relaxed mb-4">
                                Led a cross-functional team to enhance reusable patterns for AI assistants, which is now a core part of the design system to ensure consistent UX and faster implementation throughout all products and internal tools.
                            </p>
                            <a href="https://www.thomsonreuters.com/en/cocounsel" target="_blank" rel="noopener noreferrer" class="text-[var(--link-color)] font-medium text-sm hover:underline tracking-wide">
                                Learn More &rarr;
                            </a>
                            <div class="flex flex-wrap mt-4">
                                <span class="tag-chip">UI Components</span>
                                <span class="tag-chip">Team Leadership</span>
                                <span class="tag-chip">Design Systems</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="animate-on-scroll">
                <h2 class="section-title">
                    Organizational AI Patterns
                </h2>
                <div class="space-y-5">
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">AI-Driven Compliance Alert Framework</h3>
                        <p class="card-description">Conducted a systematical analysis of designs used accross the organization for compliance alerts and notifications. Designed an AI-driven compliance alert framework with interconnected solutions, including intelligent alerts, automated alert monitoring, and guided action workflows.</p>
                        <div class="flex flex-wrap mt-4">
                            <span class="tag-chip">Systems Design</span>
                            <span class="tag-chip">Design Patterns</span>
                            <span class="tag-chip">Design Organization</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="animate-on-scroll">
                <h2 class="section-title">
                    AI-Driven Product Features
                </h2>
                <div class="space-y-5">
                     <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl overflow-hidden">
                        <img 
                            src="assets/audit.jpeg" 
                            alt="Audit Intelligence Analyze dashboard" 
                            class="w-full h-auto object-cover clickable-image"
                            onclick="openModal(this)"
                        >
                        <div class="p-7">
                            <h3 class="card-title">Audit Intelligence Analyze</h3>
                            <p class="text-text-secondary leading-relaxed mb-4">
                                Acted as the lead researcher and designer for an AI-powered tool that enhances audit quality by automating transaction analysis. This high-impact project was recognized by <span class="font-medium text-text-primary">Accounting Today</span> as a top new audit tool.
                            </p>
                            <a href="https://tax.thomsonreuters.com/en/accounting-solutions/c/thomson-reuters-introduces-audit-intelligence-analyze" target="_blank" rel="noopener noreferrer" class="text-[var(--link-color)] font-medium text-sm hover:underline tracking-wide">
                                Learn More &rarr;
                            </a>
                            <div class="flex flex-wrap mt-4">
                                <span class="tag-chip">Research and Design</span>
                                <span class="tag-chip">New AI/ML Feature</span>
                                <span class="tag-chip">Enterprise Product</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">Human-in-the-Loop Content Operations</h3>
                        <p class="card-description">Designed human-in-the-loop tools for AI-driven content operations. This framework for labeling, review, and workflow automation boosted analytical precision while keeping users in control.</p>
                        <div class="flex flex-wrap mt-4">
                            <span class="tag-chip">Human-AI Collaboration</span>
                            <span class="tag-chip">Augmented Intelligence</span>
                            <span class="tag-chip">Trust and productivity</span>
                        </div>
                    </div>
                </div>
            </section>

            <section class="animate-on-scroll">
                <h2 class="section-title">
                    Proof of Concept (POC) with AI
                </h2>
                <div class="space-y-5">
                     <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">UX for Legal, Tax & Accounting AI</h3>
                        <p class="card-description">Led UX design for new AI-powered features across legal, tax, and accounting POCs, creating intuitive interfaces that translated complex AI outputs into user-centered experiences.</p>
                        <div class="flex flex-wrap mt-4">
                            <span class="tag-chip">POC Development</span>
                            <span class="tag-chip">Cross-functional</span>
                            <span class="tag-chip">AI Innovation</span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="animate-on-scroll">
                <h2 class="section-title">
                    Side Projects / Previous Work
                </h2>
                <div class="space-y-5">
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">Guided Performance & Growth System</h3>
                        <p class="card-description">Designed an intuitive employee performance enhancement platform with tailored dashboards for individuals and managers. The UI streamlines the review cycle using guided quarterly meetings, clear timelines, and transparent progress tracking to foster continuous feedback and support professional growth for entire teams.</p>
                        <!-- Design Tool Section -->
                        <div class="flex flex-wrap mt-5 mb-4">
                            <span class="design-tool-chip">Design tool: Figma</span>
                        </div>
                        <!-- Thumbnails -->
                        <div class="flex flex-wrap gap-4 mt-6">
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/p_enhance1.png" 
                                    alt="Project Screenshot 1" 
                                    data-full-src="assets/p_enhance1.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/p_enhance2.png" 
                                    alt="Project Screenshot 2" 
                                    data-full-src="assets/p_enhance2.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/p_enhance3.png" 
                                    alt="Project Screenshot 3" 
                                    data-full-src="assets/p_enhance3.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                        </div>
                    </div>
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">Mobile Loyalty Application</h3>
                        <p class="card-description">Designed a complete loyalty application using the dessino.ai prototyping platform. The project involved creating a seamless, QR-code-based system for small businesses to reward repeat customers, covering the end-to-end experience from merchant setup to the end-user interface.</p>
                        <!-- Design Tool Section -->
                        <div class="flex flex-wrap mt-5 mb-4">
                            <span class="design-tool-chip">Design tool: Dessino.ai</span>
                        </div>
                        <!-- Thumbnails -->
                        <div class="flex flex-wrap gap-4 mt-6">
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/loyalty1.png" 
                                    alt="Loyalty App Screenshot 1" 
                                    data-full-src="assets/loyalty1.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/loyalty2.png" 
                                    alt="Loyalty App Screenshot 2" 
                                    data-full-src="assets/loyalty2.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/loyalty3.png" 
                                    alt="Loyalty App Screenshot 3" 
                                    data-full-src="assets/loyalty3.png"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                        </div>
                    </div>
                    <div class="bg-[var(--card-bg-color)] border border-[var(--border-color)] rounded-xl p-7">
                        <h3 class="card-title">Equine Sales Platform</h3>
                        <p class="card-description">Designed in dessino.ai and developed a full-stack website for a horse stable using React and Firestore. The application features a searchable sales gallery and an admin dashboard for the owner to manage horse profiles, streamlining the entire sales and showcasing process.</p>
                        <!-- Design Tool and Tech Stack Sections -->
                        <div class="flex flex-wrap mt-5 mb-4">
                            <span class="design-tool-chip">Design tool: Dessino.ai</span>
                            <span class="design-tool-chip">Tech stack: React, Firebase</span>
                        </div>
                        <!-- Thumbnails -->
                        <div class="flex flex-wrap gap-4 mt-6">
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/horse_stable1.jpg" 
                                    alt="Horse Stable Screenshot 1" 
                                    data-full-src="assets/horse_stable1.jpg"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/horse_stable2.jpg" 
                                    alt="Horse Stable Screenshot 2" 
                                    data-full-src="assets/horse_stable2.jpg"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                            <div class="relative w-32 h-48 overflow-hidden rounded-lg border border-[var(--border-color)] cursor-pointer clickable-image" onclick="openModal(this)">
                                <img 
                                    src="assets/horse_stable3.jpg" 
                                    alt="Horse Stable Screenshot 3" 
                                    data-full-src="assets/horse_stable3.jpg"
                                    class="w-full h-full object-cover object-top"
                                    style="mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);"
                                >
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modal for image viewing -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeModal()">&times;</span>
                <div class="modal-prev modal-nav" onclick="previousImage()">‹</div>
                <div class="modal-next modal-nav" onclick="nextImage()">›</div>
                <img id="modalImage" class="modal-image" src="" alt="">
        </div>
    </div>

    <script>
        // --- Scroll Animation (No changes needed here) ---
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        entry.target.style.transitionDelay = `${index * 100}ms`;
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        });

        // --- Corrected Modal Functionality ---
        let currentImageIndex = 0;
        let modalImageSources = [];
        let clickableElements = [];

        // Populate the image sources and elements once the DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            clickableElements = Array.from(document.querySelectorAll('.clickable-image'));
            modalImageSources = clickableElements.map(el => {
                // Find the actual image tag, whether it's the element itself or a child
                const imgTag = el.tagName === 'IMG' ? el : el.querySelector('img');
                return {
                    src: imgTag.dataset.fullSrc || imgTag.src,
                    alt: imgTag.alt
                };
            });
        });

        function openModal(element) {
            const modal = document.getElementById('imageModal');
            
            // Find the index of the clicked element in our cached list
            currentImageIndex = clickableElements.indexOf(element);
            if (currentImageIndex === -1) {
                console.error("Clicked element not found in the gallery.");
                return;
            }

            displayModalImage();
            
            modal.style.display = 'flex';
            document.body.classList.add('modal-open');
            
            // Trigger the fade-in animation
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function displayModalImage() {
            const modalImg = document.getElementById('modalImage');
            const prevBtn = document.querySelector('.modal-prev');
            const nextBtn = document.querySelector('.modal-next');
            
            if (modalImageSources.length === 0) return;
            
            const currentImage = modalImageSources[currentImageIndex];
            modalImg.src = currentImage.src;
            modalImg.alt = currentImage.alt;
            
            // Enable or disable navigation arrows at the start/end of the gallery
            prevBtn.classList.toggle('disabled', currentImageIndex === 0);
            nextBtn.classList.toggle('disabled', currentImageIndex === modalImageSources.length - 1);
            
            // Handle tall images that need to be scrollable
            modalImg.onload = function() {
                if (this.naturalHeight > window.innerHeight * 0.9) {
                    this.style.maxHeight = '90vh';
                    this.style.overflowY = 'auto';
                } else {
                    this.style.maxHeight = '100%'; // Reset for shorter images
                    this.style.overflowY = 'hidden';
                }
            };
        }

        function previousImage() {
            if (currentImageIndex > 0) {
                currentImageIndex--;
                displayModalImage();
            }
        }

        function nextImage() {
            if (currentImageIndex < modalImageSources.length - 1) {
                currentImageIndex++;
                displayModalImage();
            }
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('show');
            document.body.classList.remove('modal-open');
            
            setTimeout(() => {
                modal.style.display = 'none';
                document.getElementById('modalImage').src = ""; // Clear src to stop loading
            }, 300);
        }

        // Keyboard navigation (Escape, Left Arrow, Right Arrow)
        document.addEventListener('keydown', function(event) {
            const modal = document.getElementById('imageModal');
            if (modal.classList.contains('show')) {
                if (event.key === 'Escape') closeModal();
                if (event.key === 'ArrowLeft') previousImage();
                if (event.key === 'ArrowRight') nextImage();
            }
        });
    </script>

</body>

</html>
